<p><a href="https://blog.otomi.world/my-forst-jekyll/">昨日</a>書いたように、はてなブログから jeykll に移行した。</p>

<p>はてなブログで書いていた記事を移す際に、ある程度自動化できたのでやったこと書く。</p>

<!-- more -->

<p>はてなブログは以下の手順で記事をエクスポートできる。</p>

<p><a href="https://help.hatenablog.com/entry/export">記事データをエクスポート（バックアップ）する</a></p>

<p>エクスポートされた記事は Movable Type 形式のブログデータらしいのだが、jeykll はそのままだと記事として読み込めないぽいので、各記事毎にファイルを分割するスクリプトを Ruby で書いた。</p>

<p>コードは GitHub に置いている。</p>

<p><a href="https://github.com/ot0m1/hatena-blog-to-jekyll">https://github.com/ot0m1/hatena-blog-to-jekyll</a></p>

<p>1つのテキストファイルを記事毎のマークダウンファイルに分割して、そのまま jeykll の _posts ディレクトリに放り込めるようにした。</p>

<h1 id="やったこと">やったこと</h1>
<ul>
  <li>1つのテキストファイルを記事毎のマークダウンファイルに分割</li>
  <li>記事を分割して配列に格納
    <ul>
      <li>正規表現で split</li>
    </ul>
  </li>
  <li>分割した記事のメタ情報と本文をそれぞれヘッダーとボディとして hash で持つ</li>
  <li>ヘッダーを jeykll の形式に変換</li>
  <li>ボディの html の構文をマークダウン形式に変換
    <ul>
      <li><a href="https://github.com/xijo/reverse_markdown">reverse_markdown</a> ライブラリを利用させてもらった</li>
    </ul>
  </li>
  <li>記事毎にマークダウンファイルとして書き出す</li>
</ul>

<h1 id="やってみて">やってみて</h1>
<ul>
  <li>jeykll で記事として扱ってもらえるファイルの内容が不明だったので、変換の最適化ができなかった
    <ul>
      <li>書き出したファイルを _posts ディレクトリに放り込んでも、タイトルがうまく反映しなかったりページングできなかったりした</li>
      <li>jeykll 側のパーマリンクの設定などで対応できそうだったが、そこまで調べる元気がなく結局手作業での修正が発生した</li>
    </ul>
  </li>
  <li>記事毎にマークダウンファイルを作るのはできたので、手作業は発生はしたが大幅に移行する時間は短縮できた
    <ul>
      <li>自分は20記事くらいだったが、100記事超えるとかなってくるともっと時間短縮が効いてくると思う</li>
    </ul>
  </li>
</ul>

<h1 id="まとめ">まとめ</h1>
<p>現実に起こっている課題を Ruby で解決することができたのがなによりの収穫でした。</p>
